---
# Secret in dedicated namespace for production environment
apiVersion: v1
kind: Secret
metadata:
  name: production-vault-credentials
  namespace: vault-secrets
type: Opaque
stringData:
  terraform.tfvars.json: |
    {
      "vault_token": "hvs.production-vault-token-here"
    }

---
# Secret for development environment in different namespace  
apiVersion: v1
kind: Secret
metadata:
  name: dev-vault-credentials
  namespace: development-secrets
type: Opaque
stringData:
  terraform.tfvars.json: |
    {
      "vault_token": "hvs.development-vault-token-here"
    }

---
# Example using the production secret
apiVersion: vaultk8sauths.config.stuttgart-things.com/v1alpha1
kind: VaultK8sAuthClaim
metadata:
  name: production-vault-auth
  namespace: production
spec:
  cluster_name: "prod-cluster"
  vault_addr: "https://vault.prod.com"
  providerConfigRef: "production-terraform-config"
  
  # Reference to production secret in dedicated namespace
  secretRef:
    namespace: "vault-secrets"
    name: "production-vault-credentials"
    key: "terraform.tfvars.json"
  
  k8s_auths:
    - name: "prod-workloads"
      namespace: "production"
      token_policies: ["prod-read-policy", "prod-write-policy"]
      token_ttl: 7200

---
# Example using the development secret
apiVersion: vaultk8sauths.config.stuttgart-things.com/v1alpha1
kind: VaultK8sAuthClaim
metadata:
  name: dev-vault-auth
  namespace: development
spec:
  cluster_name: "dev-cluster"
  vault_addr: "https://vault.dev.com"
  providerConfigRef: "dev-terraform-config"
  
  # Reference to development secret in different namespace
  secretRef:
    namespace: "development-secrets"
    name: "dev-vault-credentials"
    key: "terraform.tfvars.json"
  
  k8s_auths:
    - name: "dev-workloads"
      namespace: "development"
      token_policies: ["dev-policy"]
      token_ttl: 3600